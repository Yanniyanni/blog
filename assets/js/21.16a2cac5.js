(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{425:function(t,_,r){"use strict";r.r(_);var v=r(48),e=Object(v.a)({},(function(){var t=this,_=t.$createElement,r=t._self._c||_;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"浏览器主要组成"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#浏览器主要组成"}},[t._v("#")]),t._v(" 浏览器主要组成")]),t._v(" "),r("p",[t._v("浏览器是多进程的，一个页面从请求到渲染，是多个进程在同时进行，这些进程主要由以下的组件产生。")]),t._v(" "),r("p",[t._v("浏览器主要组成：")]),t._v(" "),r("ul",[r("li",[t._v("用户界面（The user interface）")]),t._v(" "),r("li",[t._v("浏览器引擎（The browser engine）")]),t._v(" "),r("li",[t._v("渲染引擎（The rendering engine）")]),t._v(" "),r("li",[t._v("网络（Networking）")]),t._v(" "),r("li",[t._v("UI 后端绘制（UI backend）")]),t._v(" "),r("li",[t._v("js 解析器（JavaScript interpreter）")]),t._v(" "),r("li",[t._v("数据存储（Data storage）")])]),t._v(" "),r("a",{attrs:{"data-fancybox":"",href:t.$withBase("/interview/browser-layers.png")}},[r("img",{attrs:{src:t.$withBase("/interview/browser-layers.png")}})]),t._v(" "),r("h2",{attrs:{id:"渲染引擎"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#渲染引擎"}},[t._v("#")]),t._v(" 渲染引擎")]),t._v(" "),r("p",[t._v("渲染引擎主要渲染 html 、css 、图片 等内容。"),r("strong",[t._v("不同浏览器的渲染机制有差异。")])]),t._v(" "),r("h3",{attrs:{id:"渲染步骤"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#渲染步骤"}},[t._v("#")]),t._v(" 渲染步骤")]),t._v(" "),r("p",[t._v("浏览器渲染网页的过程，主要有以下几个步骤")]),t._v(" "),r("ol",[r("li",[t._v("解析HTML，生成 DOM 树")]),t._v(" "),r("li",[t._v("构建 DOM 树：此时只有形状和颜色等属性")]),t._v(" "),r("li",[t._v("渲染树结构：给每个节点都加上坐标，构成显示布局")]),t._v(" "),r("li",[t._v("绘制树：给节点加上 UI 样式，进行绘制显示")])]),t._v(" "),r("a",{attrs:{"data-fancybox":"",href:t.$withBase("/interview/browser-flow.png")}},[r("img",{attrs:{src:t.$withBase("/interview/browser-flow.png")}})]),t._v(" "),r("p",[r("strong",[t._v("下图是 webkit 内核（chrome） 的渲染流程：")])]),t._v(" "),r("a",{attrs:{"data-fancybox":"",href:t.$withBase("/interview/browser-webkitflow.png")}},[r("img",{attrs:{src:t.$withBase("/interview/browser-webkitflow.png")}})]),t._v(" "),r("h3",{attrs:{id:"关键渲染路径"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#关键渲染路径"}},[t._v("#")]),t._v(" 关键渲染路径")]),t._v(" "),r("h2",{attrs:{id:"重绘和重排"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#重绘和重排"}},[t._v("#")]),t._v(" 重绘和重排")]),t._v(" "),r("ul",[r("li",[t._v("重绘：当元素外观的改变时触发。如改变vidibility、outline、背景色等属性。")]),t._v(" "),r("li",[t._v("重排/回流：当元素的位置和几何信息改变时触发。如改变窗口大小、元素的width、height、position 等。")])]),t._v(" "),r("p",[t._v("重排处于layout阶段、重绘处于paint阶段，越往前损耗越高，所以重排会比重绘要消耗性能。")]),t._v(" "),r("p",[r("strong",[r("code",[t._v("注意：重排一定会触发重绘，而重绘不一定会重排。")])])]),t._v(" "),r("h3",{attrs:{id:"重绘-repaint"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#重绘-repaint"}},[t._v("#")]),t._v(" 重绘（repaint）")]),t._v(" "),r("h4",{attrs:{id:"_1-导致-repaint-的操作"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-导致-repaint-的操作"}},[t._v("#")]),t._v(" 1. 导致 repaint 的操作：")]),t._v(" "),r("ul",[r("li",[t._v("所有改变元素外观的操作：color、background、box-shadow 等。")])]),t._v(" "),r("h4",{attrs:{id:"_2-常见的引起-repaint-的元素"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-常见的引起-repaint-的元素"}},[t._v("#")]),t._v(" 2. 常见的引起 repaint 的元素")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("常见 repaint 元素")]),t._v(" "),r("th"),t._v(" "),r("th"),t._v(" "),r("th")])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("color")]),t._v(" "),r("td",[t._v("border-style")]),t._v(" "),r("td",[t._v("visibility")]),t._v(" "),r("td",[t._v("background")])]),t._v(" "),r("tr",[r("td",[t._v("text-decoration")]),t._v(" "),r("td",[t._v("background-image")]),t._v(" "),r("td",[t._v("background-position")]),t._v(" "),r("td",[t._v("background-repeat")])]),t._v(" "),r("tr",[r("td",[t._v("outline-color")]),t._v(" "),r("td",[t._v("outline")]),t._v(" "),r("td",[t._v("outline-style")]),t._v(" "),r("td",[t._v("border-radius")])]),t._v(" "),r("tr",[r("td",[t._v("outline-width")]),t._v(" "),r("td",[t._v("box-shadow")]),t._v(" "),r("td",[t._v("background-size")]),t._v(" "),r("td")])])]),t._v(" "),r("h3",{attrs:{id:"重排-回流-reflow"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#重排-回流-reflow"}},[t._v("#")]),t._v(" 重排/回流（reflow）")]),t._v(" "),r("h4",{attrs:{id:"_1、导致-reflow-的操作"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1、导致-reflow-的操作"}},[t._v("#")]),t._v(" 1、导致 reflow 的操作：")]),t._v(" "),r("ul",[r("li",[t._v("改变窗口大小")]),t._v(" "),r("li",[t._v("改变文字大小")]),t._v(" "),r("li",[t._v("添加/删除样式表")]),t._v(" "),r("li",[t._v("内容的改变，(用户在输入框中写入内容也会)")]),t._v(" "),r("li",[t._v("激活伪类，如:hover")]),t._v(" "),r("li",[t._v("操作class属性")]),t._v(" "),r("li",[t._v("脚本操作DOM")]),t._v(" "),r("li",[t._v("计算offsetWidth和offsetHeight")]),t._v(" "),r("li",[t._v("设置style属性")]),t._v(" "),r("li",[t._v("...")])]),t._v(" "),r("h4",{attrs:{id:"_2、常见的引起的-reflow-元素"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2、常见的引起的-reflow-元素"}},[t._v("#")]),t._v(" 2、常见的引起的 reflow 元素")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("常见 reflow 元素")]),t._v(" "),r("th"),t._v(" "),r("th"),t._v(" "),r("th")])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("width")]),t._v(" "),r("td",[t._v("height")]),t._v(" "),r("td",[t._v("padding")]),t._v(" "),r("td",[t._v("margin")])]),t._v(" "),r("tr",[r("td",[t._v("display")]),t._v(" "),r("td",[t._v("border-width")]),t._v(" "),r("td",[t._v("border")]),t._v(" "),r("td",[t._v("top")])]),t._v(" "),r("tr",[r("td",[t._v("position")]),t._v(" "),r("td",[t._v("font-size")]),t._v(" "),r("td",[t._v("float")]),t._v(" "),r("td",[t._v("text-align")])]),t._v(" "),r("tr",[r("td",[t._v("font-family")]),t._v(" "),r("td",[t._v("line-height")]),t._v(" "),r("td",[t._v("vertical-align")]),t._v(" "),r("td",[t._v("right")])]),t._v(" "),r("tr",[r("td",[t._v("clear")]),t._v(" "),r("td",[t._v("white-space")]),t._v(" "),r("td",[t._v("bottom")]),t._v(" "),r("td",[t._v("min-height")])])])]),t._v(" "),r("h4",{attrs:{id:"_3、如何减少重排"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3、如何减少重排"}},[t._v("#")]),t._v(" 3、如何减少重排？")]),t._v(" "),r("ol",[r("li",[t._v("不要一条一条地修改 DOM 的样式，预先定义好 class，然后修改 DOM 的 className")]),t._v(" "),r("li",[t._v("把 DOM 离线后修改，比如：先把 DOM 给 display:none (有一次 Reflow)，然后你修改100次，然后再把它显示出来")]),t._v(" "),r("li",[t._v("不要把 DOM 结点的属性值放在一个循环里当成循环里的变量")]),t._v(" "),r("li",[t._v("尽可能不要修改影响范围比较大的 DOM")]),t._v(" "),r("li",[t._v("为动画的元素使用绝对定位 absolute / fixed")]),t._v(" "),r("li",[t._v("不要使用 table 布局，可能很小的一个小改动会造成整个 table 的重新布局")])]),t._v(" "),r("p",[t._v("参考文章：")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/",target:"_blank",rel:"noopener noreferrer"}},[t._v("How Browsers Work: Behind the scenes of modern web browsers"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://blog.csdn.net/qq_27674439/article/details/98957581",target:"_blank",rel:"noopener noreferrer"}},[t._v("css 重排和重绘总结"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://segmentfault.com/a/1190000017329980",target:"_blank",rel:"noopener noreferrer"}},[t._v("你真的了解回流和重绘吗"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);_.default=e.exports}}]);