(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{508:function(t,s,a){"use strict";a.r(s);var n=a(48),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"需求背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需求背景"}},[t._v("#")]),t._v(" 需求背景")]),t._v(" "),a("p",[t._v("xxx")]),t._v(" "),a("h1",{attrs:{id:"设计方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设计方案"}},[t._v("#")]),t._v(" 设计方案")]),t._v(" "),a("h2",{attrs:{id:"整体方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#整体方案"}},[t._v("#")]),t._v(" 整体方案")]),t._v(" "),a("h3",{attrs:{id:"项目搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目搭建"}},[t._v("#")]),t._v(" 项目搭建")]),t._v(" "),a("ul",[a("li",[t._v("技术选型思考")])]),t._v(" "),a("ol",[a("li",[t._v("考虑到未来可能与投放系统合并，且可能需要抽离公共组件库，所以选用 vue3 + element-plus 主要前端技术。")]),t._v(" "),a("li",[t._v("选用 typescript 开发。投放系统已完成 typescript 转换 ，团队成员对 vue + typescript 的组合已经比较熟悉，不需要额外学习成本。")]),t._v(" "),a("li",[t._v("使用新的工具/库，跟随技术新趋势，提升团队前端水平。")])]),t._v(" "),a("ul",[a("li",[t._v("技术栈选用\nvue3 + vue-router + pinia + vue-i18n + element-plus + vite + typescript")])]),t._v(" "),a("h3",{attrs:{id:"部署方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署方案"}},[t._v("#")]),t._v(" 部署方案")]),t._v(" "),a("ul",[a("li",[t._v("自动化部署：前端发布平台/搭建 Jenkins （"),a("RouterLink",{attrs:{to:"/articles/server/2020-04-25-intro-jenkins-install.html"}},[t._v("《Jenkins安装&部署前端项目》")]),t._v("）")],1),t._v(" "),a("li",[t._v("缓存策略：配置 index.html 不缓存、其余资源协商缓存（"),a("RouterLink",{attrs:{to:"/advanced/internet/http-cache.html"}},[t._v("《HTTP缓存》")]),t._v("）\n"),a("a",{attrs:{"data-fancybox":"",href:t.$withBase("/articals/2022-09-15-fe-architecture-01.png")}},[a("img",{attrs:{src:t.$withBase("/articals/2022-09-15-fe-architecture-01.png")}})])],1),t._v(" "),a("li",[t._v("CDN部署：与运维沟通，申请将域名上 CDN")])]),t._v(" "),a("h3",{attrs:{id:"监控方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监控方案"}},[t._v("#")]),t._v(" 监控方案")]),t._v(" "),a("p",[t._v("阿里云应用实时监控服务ARMS："),a("a",{attrs:{href:"https://signin.aliyun.com/1825457112123838.onaliyun.com/login.htm?callback=https%3A%2F%2Farms.console.aliyun.com%2F&accounttraceid=5f8d29f016fc4139b145926eb709ee69klnu&cspNonce=pe0e7mZGw3&oauth_callback=https%3A%2F%2Farms.console.aliyun.com%2F&spma=a2c44&spmb=11131515#/main",target:"_blank",rel:"noopener noreferrer"}},[t._v("ARMS"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("ARMS 优势：")]),t._v(" "),a("ul",[a("li",[t._v("监控页面的加载过程和运行时状态，同时将页面加载性能、运行时异常以及API调用状态和耗时等数据，上报到日志服务器")]),t._v(" "),a("li",[t._v("直观的报表展示，能及时发现并诊断问题")]),t._v(" "),a("li",[t._v("提供全链路追踪，能反向追溯前面的操作路径，帮助快速定位问题")])]),t._v(" "),a("h3",{attrs:{id:"埋点数据统计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#埋点数据统计"}},[t._v("#")]),t._v(" 埋点数据统计")]),t._v(" "),a("p",[t._v("数据分析平台："),a("a",{attrs:{href:"https://posthog.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PostHog"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("第三方分析平台对比具体可看：用户行为日志调研")]),t._v(" "),a("h2",{attrs:{id:"模块划分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块划分"}},[t._v("#")]),t._v(" 模块划分")]),t._v(" "),a("p",[t._v("新项目的前端模块划分如下：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("src\n |--- apis         // 请求有关文件夹\n |--- assets       // 素材文件夹\n |--- components   // 公共组件文件夹\n |--- enums        // 公共枚举\n |--- hooks        // 公共钩子函数\n |--- layouts      // layout 布局有关\n |--- locales      // 多语言有关\n |--- views        // 子界面文件夹\n |--- views        // 状态管理\n |--- router       // 路由有关\n |--- main.ts      // 项目入口文件\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[t._v("简单介绍一下组件的划分，组件的架构大致如下图所示：\n"),a("a",{attrs:{"data-fancybox":"",href:t.$withBase("/articals/2022-09-15-fe-architecture-02.jpg")}},[a("img",{attrs:{src:t.$withBase("/articals/2022-09-15-fe-architecture-02.jpg")}})])]),t._v(" "),a("ul",[a("li",[t._v("layout：系统主界面。将调用下层的 manage、base，组成完整的界面。")]),t._v(" "),a("li",[t._v("manage、base ：子布局界面。将调用下层的 view 组件，组成完整的界面")]),t._v(" "),a("li",[t._v("view：子界面。依赖于下层的各个子组件，构成一个个具有交互功能的子界面。")]),t._v(" "),a("li",[t._v("component：子组件。接受view的调用，完成各个子组件行为的渲染。")])]),t._v(" "),a("h2",{attrs:{id:"组件设计技术"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件设计技术"}},[t._v("#")]),t._v(" 组件设计技术")]),t._v(" "),a("h3",{attrs:{id:"组件拆分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件拆分"}},[t._v("#")]),t._v(" 组件拆分")]),t._v(" "),a("p",[t._v("我们通常在父组件中定义获取数据逻辑并存储，然后通过 props 传递数据给子组件，子组件接受数据进行渲染呈现 UI。在这个模式中，每个组件都被拆分成若干个小组件，每一个组件都有各自清晰的职责。\n以投放系统的权限模块为例。")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--父组件 —— 渲染表现组件--\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("!isEdit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("content-wrap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 子组件 ResultTemp，负责结果展示 --\x3e")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ResultTemp")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("resultTemp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":data")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("resultList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":filter-id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("searchParams.id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("label")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("子渠道"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ResultTemp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("isEdit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("content-wrap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 子组件 EditTemp，负责编辑功能 --\x3e")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("EditTemp")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("editTemp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":data")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("node-key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":props")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{\n          label: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("\n        }"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":checked-ids")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("checkedKeys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@checkedKeys")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("getCheckedKeys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ResultTemp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./template/ResultTemp.vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" EditTemp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./template/EditTemp.vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n ")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br")])]),a("h3",{attrs:{id:"函数式组件编程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数式组件编程"}},[t._v("#")]),t._v(" 函数式组件编程")]),t._v(" "),a("p",[t._v("得益于 Vue3 中组合式 API 功能，在 Vue 中函数组件也能实现近似类组件一样的生命周期功能和 Vue 状态控制，使用 Hooks 已经渐渐地成为了一种编程范式。搭配 Hooks 功能，使用函数式组件开发，能够有效降低组件的状态复杂度，便于组件的解耦和组织。")]),t._v(" "),a("ul",[a("li",[t._v("组合式API："),a("a",{attrs:{href:"https://cn.vuejs.org/guide/reusability/composables.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("组合式函数 | Vue.js"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("TypeScript 与组合式 API： "),a("a",{attrs:{href:"https://cn.vuejs.org/guide/typescript/composition-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("TypeScript 与组合式 API | Vue.js"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("官方推荐工具库："),a("a",{attrs:{href:"https://vueuse.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("VueUse"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("如，封装 useFetch 处理异步状态")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fetch.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" isRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unref"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" watchEffect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useFetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" error "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在请求之前重设状态...")]),t._v("\n    data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// unref() 解包可能为 ref 的值")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unref")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 若输入的 URL 是一个 ref，那么启动一个响应式的请求")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("watchEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("doFetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 否则只请求一次")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 避免监听器的额外开销")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br")])]),a("p",[t._v("组件中使用")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script setup"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useFetch "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./fetch.js'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useFetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h2",{attrs:{id:"界面ui设计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#界面ui设计"}},[t._v("#")]),t._v(" 界面UI设计")]),t._v(" "),a("ul",[a("li",[t._v("UI 规范：xxUI交互规范")]),t._v(" "),a("li",[t._v("参考竞品："),a("a",{attrs:{href:"https://new.trackingio.com/#/login",target:"_blank",rel:"noopener noreferrer"}},[t._v("trackingio"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("原型设计工具："),a("a",{attrs:{href:"https://axhub.im/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Axhub - Axure 原型托管与协作平台 by Lintendo"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("原型展示链接：xx")])]),t._v(" "),a("h2",{attrs:{id:"代码编程规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码编程规范"}},[t._v("#")]),t._v(" 代码编程规范")]),t._v(" "),a("h3",{attrs:{id:"检测工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检测工具"}},[t._v("#")]),t._v(" 检测工具")]),t._v(" "),a("p",[t._v("目前项目引入了以下工具，已经有了对应的配置文件。如果在 vscode 中添加了对应插件，保存会自动根据配置文件进行格式化。")]),t._v(" "),a("ul",[a("li",[t._v("Js校验："),a("a",{attrs:{href:"https://eslint.org/docs/latest/user-guide/getting-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("ESLint"),a("OutboundLink")],1),t._v("，项目根目录下需有 .eslintrc")]),t._v(" "),a("li",[t._v("Css校验："),a("a",{attrs:{href:"https://stylelint.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("StyleLint"),a("OutboundLink")],1),t._v("，项目根目录下需有 .stylelintrc")]),t._v(" "),a("li",[t._v("Git commit 校验："),a("a",{attrs:{href:"https://github.com/typicode/husky",target:"_blank",rel:"noopener noreferrer"}},[t._v("Husky"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://github.com/okonet/lint-staged#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("lint-staged"),a("OutboundLink")],1),t._v("，在 package.json 中配置")])]),t._v(" "),a("h3",{attrs:{id:"编码规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编码规范"}},[t._v("#")]),t._v(" 编码规范")]),t._v(" "),a("p",[t._v("虽然使用了检测工具进行辅助，但是拥有良好的编码习惯还是非常重要的。")]),t._v(" "),a("p",[t._v("项目中引入了官方推荐的校验标准（小部分进行了自定义规则，具体可看根目录下配置文件），可以通过文档了解更多。")]),t._v(" "),a("ul",[a("li",[t._v("Js/Vue："),a("a",{attrs:{href:"https://github.com/standard/eslint-config-standard",target:"_blank",rel:"noopener noreferrer"}},[t._v("eslint-config-standard"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://eslint.vuejs.org/user-guide/",target:"_blank",rel:"noopener noreferrer"}},[t._v("eslint-plugin-vue"),a("OutboundLink")],1),t._v("、vue风格指南")]),t._v(" "),a("li",[t._v("Css："),a("a",{attrs:{href:"https://github.com/stylelint/stylelint-config-standard#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("stylelint-config-standard"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"git-分支管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-分支管理"}},[t._v("#")]),t._v(" Git 分支管理")]),t._v(" "),a("ul",[a("li",[t._v("master：发布分支，feature/XXX 测试通过的分支，合并到该分支，注意不要在此分支上做修改提交！！！只做合并操作！！！，并在此分支打包发布。")]),t._v(" "),a("li",[t._v("pre: 预发环境合并分支，合并来自 feature/XXX 的分支代码，注意不要在此分支上做修改提交！！！只做合并操作！！！，并在此分支打包提交测试；")]),t._v(" "),a("li",[t._v("test: 测试环境合并分支，合并来自feature/XXX的分支代码，注意不要在此分支上做修改提交！！！只做合并操作！！！，并在此分支打包提交测试；")]),t._v(" "),a("li",[t._v("featrue/XXX: 功能开发分支，继承自 master 分支，根据需求或者线上bug创建分支，开发、测试阶段所有改动只在该类型分支上修改；")]),t._v(" "),a("li",[t._v("hotfix/XXX: 热修复分支，继承自 master 分支，仅用于修复master分支上的问题。完成后合并到各分支。")]),t._v(" "),a("li",[t._v("fix/XXX: bug修复分支，继承自 master 分支，仅用于修复 maste r分支上的问题，完成后合并到各分支。")])]),t._v(" "),a("p",[t._v("注意：当合并有冲突时，要解决冲突后再提交，避免造成页面崩溃。不熟悉命令合并的同学可以使用编辑器的merge功能，或者可以使用工具，如："),a("a",{attrs:{href:"https://www.sourcetreeapp.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("sourceTree"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"git-commit规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-commit规范"}},[t._v("#")]),t._v(" Git commit规范")]),t._v(" "),a("p",[t._v("参考 Angular 的 commit 规范，具体介绍可看 "),a("a",{attrs:{href:"https://www.conventionalcommits.org/zh-hans/v1.0.0/",target:"_blank",rel:"noopener noreferrer"}},[t._v("约定式提交"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("blockquote",[a("p",[t._v("格式：feat: 功能开发")])]),t._v(" "),a("ul",[a("li",[t._v("feat: 功能开发")]),t._v(" "),a("li",[t._v("fix: bug修复")]),t._v(" "),a("li",[t._v("docs: 文档修改")]),t._v(" "),a("li",[t._v("style: 格式，不会影响代码含义的更改（空格，格式，缺少分号，样式等）")]),t._v(" "),a("li",[t._v("refactor: 重构了某些功能")]),t._v(" "),a("li",[t._v("perf: 优化了某些功能")]),t._v(" "),a("li",[t._v("test: 增加测试或者调整已存在的测试")]),t._v(" "),a("li",[t._v("ci: 对CI配置文件或脚本进行了修改")]),t._v(" "),a("li",[t._v("chore: 构建过程或辅助工具的变动")]),t._v(" "),a("li",[t._v("types: 添加 ts 有关 types")]),t._v(" "),a("li",[t._v("build: 对构建系统或者外部依赖项进行了修改")]),t._v(" "),a("li",[t._v("Merge branch: 特殊添加，兼容有冲突时的 merge")])])])}),[],!1,null,null,null);s.default=e.exports}}]);